#N canvas 750 -1 903 880 12;
#X obj 224 164 *~;
#X obj 312 144 line~;
#X obj 128 235 cos~;
#X obj 128 191 +~;
#X obj 224 132 osc~ 0;
#X obj 312 118 pack 0 50;
#X obj 312 92 / 100;
#X text 286 27 modulation index;
#X text 286 42 in hundredths;
#X text 125 78 carrier;
#X text 124 96 frequency;
#X text 209 83 frequency;
#X text 210 66 modulation;
#X text 33 132 carrier;
#X text 33 147 phase -->;
#X text 6 175 phase;
#X text 5 190 modulation-->;
#X text 12 217 output;
#X text 11 234 waveform -->;
#X text 129 1 PHASE MODULATION;
#X text 16 378 Most implementations of "FM" actually use phase \, not
frequency \, modulation \, because it extends in a more natural way
to "multi-operator FM" with three or more oscillators.;
#X text 16 434 To do phase modulation \, we split the "carrier oscillator"
into its phase calculation (phasor~) and its waveform lookup (cos~).
These together would be equivalent to an osc~ object \, but the "+~"
between them adds the modulating oscillator's output to the phase.
;
#X text 20 652 We also have to use a line~ to smooth changes in the
modulation index \, which wasn't necessary in the previous patch.;
#X obj 128 148 phasor~;
#X obj 117 557 cos~;
#X obj 117 529 phasor~;
#X text 60 539 this:;
#X text 219 532 is the same;
#X text 220 551 as this:;
#X obj 335 544 osc~;
#N canvas 0 0 450 300 graph2 0;
#X array phase-out 441 float 1;
#A 0 -0.113038 -0.111412 -0.10903 -0.105892 -0.102006 -0.0973747 -0.0920192
-0.0859542 -0.0792053 -0.0718012 -0.0637714 -0.0551566 -0.0459925 -0.0363267
-0.0262047 -0.0156765 -0.00479645 0.00638307 0.0178024 0.0294046 0.0411291
0.0529155 0.0647027 0.0764302 0.0880365 0.0994627 0.11065 0.12154 0.13208
0.142214 0.151896 0.161074 0.169708 0.177755 0.185179 0.19195 0.198034
0.203413 0.208064 0.211975 0.215137 0.217539 0.21919 0.220089 0.220249
0.219684 0.218412 0.216461 0.213854 0.210629 0.206821 0.20247 0.197623
0.192322 0.186624 0.180577 0.174239 0.167667 0.160919 0.154055 0.147135
0.140222 0.133375 0.126656 0.120123 0.113837 0.107851 0.102224 0.0970067
0.0922483 0.0879978 0.0842954 0.081186 0.078701 0.0768752 0.075736
0.0753044 0.0756041 0.0766431 0.0784355 0.0809822 0.084283 0.0883345
0.0931216 0.0986353 0.10485 0.111743 0.119286 0.127443 0.136181 0.145454
0.155222 0.165434 0.17604 0.186987 0.198219 0.20968 0.221309 0.233047
0.244834 0.256608 0.268309 0.279876 0.291248 0.302369 0.313182 0.323631
0.333665 0.343233 0.35229 0.360792 0.368699 0.375978 0.382592 0.38852
0.393733 0.398218 0.40196 0.404948 0.407184 0.408662 0.409394 0.409388
0.408661 0.407235 0.405131 0.402385 0.399024 0.39509 0.390623 0.385668
0.380276 0.374492 0.368376 0.361979 0.355361 0.348581 0.341698 0.334774
0.327869 0.321044 0.31436 0.307876 0.30165 0.295739 0.290197 0.285076
0.280425 0.27629 0.272716 0.269738 0.267396 0.265718 0.264731 0.26446
0.264917 0.266123 0.268078 0.27079 0.274255 0.278466 0.283415 0.289079
0.295444 0.30248 0.310158 0.318444 0.327298 0.336682 0.346547 0.356846
0.367527 0.378537 0.38982 0.401318 0.412971 0.42472 0.436504 0.448262
0.459933 0.471456 0.482772 0.493824 0.504555 0.514912 0.524841 0.534296
0.543227 0.551596 0.559362 0.56649 0.572952 0.578716 0.583767 0.588083
0.591654 0.594473 0.596534 0.597845 0.598407 0.598238 0.597351 0.595768
0.593519 0.590628 0.587136 0.583077 0.578496 0.573439 0.567952 0.562089
0.555903 0.549451 0.542791 0.535981 0.529083 0.522156 0.515262 0.508462
0.501816 0.495382 0.48922 0.483384 0.47793 0.472907 0.468365 0.46435
0.460901 0.458062 0.455861 0.454332 0.4535 0.453385 0.454007 0.455372
0.457494 0.460369 0.463997 0.468371 0.473474 0.479294 0.485804 0.492981
0.500793 0.509203 0.518175 0.527663 0.537624 0.548007 0.558761 0.569831
0.581161 0.592693 0.604367 0.616124 0.627901 0.639639 0.651277 0.662754
0.67401 0.684991 0.695638 0.705898 0.715721 0.725057 0.733863 0.742095
0.749718 0.756696 0.762999 0.768605 0.773487 0.777636 0.781036 0.783682
0.785574 0.786712 0.78711 0.786774 0.785728 0.783993 0.781594 0.778566
0.77494 0.770761 0.766067 0.760907 0.755332 0.74939 0.743139 0.736633
0.729933 0.723096 0.716184 0.709258 0.702378 0.695605 0.689 0.68262
0.676523 0.670766 0.6654 0.660479 0.656048 0.652152 0.648835 0.646129
0.644074 0.642694 0.642017 0.642062 0.642843 0.644375 0.646658 0.649698
0.653488 0.65802 0.663281 0.66925 0.675908 0.683223 0.691166 0.6997
0.708784 0.718377 0.72843 0.738895 0.749718 0.760845 0.772219 0.783781
0.795473 0.807234 0.819002 0.830716 0.842318 0.853744 0.86494 0.875844
0.886404 0.896566 0.906278 0.915497 0.924172 0.932268 0.939744 0.946569
0.952716 0.958155 0.962874 0.966851 0.97008 0.972555 0.974274 0.975246
0.975473 0.974977 0.973771 0.971883 0.969339 0.966171 0.962418 0.958116
0.953313 0.948054 0.942389 0.936373 0.930057 0.923502 0.916764 0.909904
0.902981 0.896058 0.889195 0.882452 0.875889 0.869565 0.863538 0.85786
0.852587 0.847767 0.843449 0.839676 0.836488 0.833923 0.83201 0.830783
0.83026 0.830464 0.831408 0.8331 0.83555 0.838751 0.842704 0.847395
0.852809 0.85893 0.865729 0.873183 0.881254 0.889908 0.899104 0.908797
0.918941 0.929483 0.940373 0.951554 0.962968 0.974559 0.986265 0.998026
1.00978 0.0214695 0.0330306 0.0444054 0.0555338 0.0663612 0.0768306
0.086891 0.0964925 0.105586 0.114133 0.122087 0.129417 0.136088 0.142074
0.147352 0.1519 0.155709 0.158765 0.161068 0.162617 0.163416 0.16348
0.162818 0.161457 0.159416 0.156727 0.153424 0.149541 0.145123;
#X array cos-out 441 float 1;
#A 0 0.758197 0.764824 0.774372 0.786694 0.801531 0.818592 0.837453
0.857672 0.878683 0.899936 0.920775 0.940533 0.958516 0.974046 0.986457
0.995151 0.999527 0.999181 0.993743 0.982978 0.966791 0.945231 0.918487
0.886883 0.85087 0.810993 0.767892 0.722301 0.674949 0.626635 0.5781
0.530106 0.48336 0.438498 0.396113 0.356704 0.320738 0.288553 0.260447
0.236651 0.217305 0.202542 0.192375 0.186829 0.185844 0.189328 0.197173
0.209175 0.225161 0.244856 0.267984 0.294216 0.323186 0.354512 0.387757
0.422487 0.458239 0.494542 0.530935 0.566981 0.602241 0.636341 0.668925
0.699705 0.728427 0.754914 0.779039 0.80071 0.819915 0.836664 0.850999
0.862979 0.872676 0.880196 0.885581 0.888886 0.89012 0.889263 0.88626
0.880991 0.873301 0.863018 0.849878 0.833643 0.814012 0.790721 0.763477
0.73203 0.696161 0.655718 0.610638 0.560919 0.506686 0.448157 0.385654
0.319636 0.250636 0.179295 0.106315 0.0324532 -0.0415078 -0.11478 -0.186609
-0.256275 -0.323135 -0.386631 -0.446299 -0.5018 -0.552855 -0.599353
-0.641239 -0.678556 -0.711422 -0.740012 -0.764546 -0.785236 -0.802378
-0.816183 -0.826883 -0.834699 -0.839779 -0.842265 -0.842245 -0.839778
-0.834876 -0.827528 -0.81773 -0.805382 -0.790487 -0.773003 -0.752866
-0.73014 -0.704836 -0.677058 -0.646944 -0.614696 -0.580538 -0.544803
-0.507809 -0.469973 -0.431699 -0.393452 -0.355678 -0.31885 -0.283442
-0.24988 -0.218605 -0.189999 -0.164429 -0.14224 -0.123698 -0.109085
-0.0985976 -0.0924252 -0.0907263 -0.0935866 -0.101126 -0.113339 -0.130251
-0.151806 -0.1779 -0.208408 -0.243081 -0.281665 -0.323794 -0.369039
-0.416909 -0.466796 -0.518098 -0.570082 -0.622018 -0.673131 -0.722636
-0.769778 -0.813839 -0.854167 -0.89019 -0.921449 -0.947606 -0.968459
-0.983942 -0.994136 -0.999237 -0.999574 -0.995597 -0.98783 -0.976855
-0.963335 -0.947894 -0.931229 -0.913996 -0.896761 -0.880152 -0.864655
-0.850717 -0.838712 -0.828924 -0.821611 -0.816897 -0.814846 -0.815465
-0.818681 -0.824357 -0.83227 -0.842193 -0.853819 -0.866814 -0.880811
-0.895402 -0.910222 -0.924853 -0.938928 -0.952101 -0.964068 -0.974536
-0.983344 -0.990309 -0.995395 -0.99857 -0.99993 -0.999562 -0.997688
-0.994536 -0.990385 -0.985537 -0.980299 -0.975003 -0.969974 -0.965464
-0.96177 -0.959097 -0.95761 -0.957405 -0.958516 -0.960934 -0.964534
-0.969142 -0.974505 -0.980305 -0.986124 -0.991531 -0.99601 -0.99901
-0.999969 -0.998313 -0.993471 -0.984923 -0.972173 -0.954834 -0.932609
-0.905266 -0.872755 -0.835126 -0.792573 -0.745411 -0.694089 -0.639159
-0.581269 -0.521132 -0.459522 -0.397199 -0.334966 -0.273569 -0.213719
-0.156084 -0.101219 -0.0496503 -0.00177817 0.0420551 0.0815773 0.116625
0.147034 0.172762 0.193764 0.210046 0.221657 0.228623 0.231056 0.229004
0.2226 0.211957 0.197204 0.178519 0.156059 0.130067 0.100777 0.0684746
0.0334887 -0.0038394 -0.0431014 -0.0838912 -0.125755 -0.168238 -0.210874
-0.253204 -0.294769 -0.335157 -0.373959 -0.410822 -0.445439 -0.477523
-0.506869 -0.53328 -0.556625 -0.576791 -0.593689 -0.607283 -0.617487
-0.624289 -0.6276 -0.62738 -0.623556 -0.616005 -0.604642 -0.58931 -0.569906
-0.546287 -0.518299 -0.485874 -0.448899 -0.407368 -0.361303 -0.310809
-0.256086 -0.197389 -0.13512 -0.0697223 -0.0017778 0.0680804 0.139146
0.210656 0.281837 0.351899 0.420085 0.485681 0.548053 0.606646 0.661017
0.71083 0.755905 0.796142 0.831565 0.862311 0.88862 0.910784 0.929172
0.944157 0.956177 0.965617 0.972914 0.978385 0.982365 0.985165 0.986954
0.987912 0.98813 0.987653 0.986432 0.984416 0.981484 0.977478 0.972235
0.965552 0.957275 0.947189 0.935179 0.921128 0.904968 0.886683 0.866313
0.843994 0.819869 0.794199 0.767263 0.739417 0.71103 0.682541 0.654382
0.626993 0.600844 0.576372 0.553989 0.534101 0.517052 0.503199 0.492777
0.486046 0.483179 0.484296 0.489478 0.498718 0.512004 0.529174 0.550079
0.574455 0.601957 0.632217 0.664727 0.698981 0.734328 0.770129 0.805681
0.840236 0.873063 0.903431 0.930617 0.954015 0.973049 0.987248 0.996276
0.999922 0.998112 0.990915 0.978535 0.961315 0.939722 0.914323 0.885711
0.854617 0.821759 0.787888 0.753689 0.719918 0.687205 0.656158 0.627323
0.601153 0.57808 0.558387 0.542354 0.530141 0.521865 0.517575 0.51723
0.520783 0.528068 0.53891 0.553067 0.570234 0.590106 0.612289;
#X coords 0 1 440 -1 200 140 1;
#X restore 667 646 graph;
#X obj 213 246 tabwrite~ phase-out;
#X obj 213 273 tabwrite~ cos-out;
#X msg 213 223 bang;
#X text 260 220 <-- graph them;
#X obj 126 296 output~;
#X obj 127 270 hip~;
#X text 435 704 updated for Pd version 0.37;
#X text 21 588 The "modulation" index \, which in true FM is in units
of Hertz \, is dimensionless for phase moduation. "Good" values tend
to be between 0 and 1... in this patch the index is in hundredths.
;
#X obj 617 187 gsm_sort;
#X floatatom 706 129 5 0 0 0 - - -;
#X obj 542 12 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X floatatom 634 232 5 0 0 0 - - -;
#X obj 643 275 *;
#X floatatom 722 263 5 0 0 0 - - -;
#X obj 575 60 metro 100;
#X msg 770 177;
#X obj 572 18 loadbang;
#X obj 480 340 gsm_sort;
#X floatatom 544 289 5 0 0 0 - - -;
#X floatatom 484 368 5 0 0 0 - - -;
#X obj 603 374 gsm_avg;
#X floatatom 782 351 5 0 0 0 - - -;
#X floatatom 597 439 5 0 0 0 - - -;
#X obj 664 424 gsm_avg;
#X floatatom 843 401 5 0 0 0 - - -;
#X floatatom 658 488 5 0 0 0 - - -;
#X obj 593 504 -;
#X obj 591 557 abs;
#X obj 591 601 *;
#X floatatom 664 573 5 0 0 0 - - -;
#X obj 594 638 +;
#X floatatom 667 616 5 0 0 0 - - -;
#X floatatom 555 349 5 0 0 0 - - -;
#X obj 647 306 +;
#X obj 826 291;
#X floatatom 724 297 5 0 0 0 - - -;
#X floatatom 701 330 5 0 0 0 - - -;
#X obj 445 214 *;
#X obj 464 123 -;
#X obj 449 50 osc~;
#X floatatom 449 16 5 0 0 0 - - -;
#X obj 444 97 *~;
#X floatatom 505 92 5 0 0 0 - - -;
#X connect 0 0 3 1;
#X connect 1 0 0 1;
#X connect 2 0 32 0;
#X connect 2 0 36 0;
#X connect 3 0 2 0;
#X connect 3 0 31 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 23 0 3 0;
#X connect 25 0 24 0;
#X connect 33 0 31 0;
#X connect 33 0 32 0;
#X connect 36 0 35 0;
#X connect 36 0 35 1;
#X connect 39 0 42 0;
#X connect 39 0 69 0;
#X connect 39 1 51 1;
#X connect 39 1 54 1;
#X connect 40 0 39 1;
#X connect 41 0 45 0;
#X connect 42 0 43 0;
#X connect 42 0 68 0;
#X connect 43 0 64 0;
#X connect 44 0 43 1;
#X connect 45 0 39 0;
#X connect 45 0 48 0;
#X connect 45 0 51 0;
#X connect 45 0 54 0;
#X connect 47 0 45 0;
#X connect 48 0 50 0;
#X connect 48 0 69 1;
#X connect 49 0 48 1;
#X connect 51 0 53 0;
#X connect 52 0 51 2;
#X connect 53 0 57 0;
#X connect 54 0 56 0;
#X connect 55 0 54 2;
#X connect 56 0 57 1;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 61 0;
#X connect 60 0 59 1;
#X connect 61 0 6 0;
#X connect 62 0 61 1;
#X connect 64 0 67 0;
#X connect 66 0 64 1;
#X connect 69 0 68 1;
#X connect 70 0 72 0;
#X connect 71 0 70 0;
#X connect 72 0 23 0;
#X connect 73 0 72 1;
